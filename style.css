// Configuración verificada
const images = [
    'assets/foto1.jpg',
    'assets/foto2.jpg'
];

let currentIndex = 0;
let viewer;

function initViewer() {
    if (viewer) viewer.destroy();
    
    viewer = new PhotoSphereViewer.Viewer({
        container: document.getElementById('viewer'),
        panorama: images[currentIndex],
        loadingImg: 'https://i.imgur.com/WWX2T1m.gif',
        loadingTxt: 'Cargando imagen 360°...',
        navbar: ['autorotate', 'zoom', 'fullscreen'],
        size: {
            width: '100%',
            height: '100%'
        },
        onReady: () => {
            document.getElementById('photo-info').textContent = 
                `Imagen ${currentIndex + 1}/${images.length}`;
            document.getElementById('prev-btn').disabled = currentIndex === 0;
            document.getElementById('next-btn').disabled = currentIndex === images.length - 1;
        },
        onError: (err) => {
            console.error('Error:', err);
            document.getElementById('photo-info').textContent = 'Error al cargar imagen';
        }
    });
}

// Navegación verificada
document.getElementById('next-btn').addEventListener('click', () => {
    if (currentIndex < images.length - 1) {
        currentIndex++;
        initViewer();
    }
});

document.getElementById('prev-btn').addEventListener('click', () => {
    if (currentIndex > 0) {
        currentIndex--;
        initViewer();
    }
});

// Inicialización verificada
document.addEventListener('DOMContentLoaded', () => {
    if (images.length === 0) {
        document.getElementById('photo-info').textContent = 'No hay imágenes';
        return;
    }
    initViewer();
});
